<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Alkotrader Terminal</title>
<style>
  body {
    background-color: #111;
    color: #00ff88;
    font-family: 'Inconsolata', monospace;
    font-size: 16px;
    padding: 20px;
    overflow: hidden;
  }
  .line {
    opacity: 0;
    white-space: pre;
    transform: translateY(5px);
  }
  .visible {
    opacity: 1;
    transform: translateY(0);
    transition: opacity 0.4s ease-in, transform 0.4s ease-out;
  }
  .hidden-up {
    opacity: 0;
    transform: translateY(-5px);
    transition: opacity 0.4s ease-in, transform 0.4s ease-out;
  }
  #cursor {
    display: inline-block;
    width: 8px;
    height: 16px;
    background-color: #00ff88;
    margin-left: 4px;
    animation: blink 1s step-start infinite;
  }
  @keyframes blink {
    50% { opacity: 0; }
  }
</style>
</head>
<body>
<div id="terminal"></div>
<div id="cursor"></div>

<audio id="a1" src="audio/mentor1.mp3"></audio>
<audio id="a2" src="audio/mentor2.mp3"></audio>
<audio id="a3" src="audio/mentor3.mp3"></audio>

<script>
const terminal = document.getElementById('terminal');

const timeline = [
  '[00:00:00.001] Connecting to Alkotrader Terminal',
  '[00:00:01.018] Ping: 18ms',
  '[00:00:01.522] Loading alkotrader wisdom cache...',
  '[00:00:01.714] Quote: "Markets are drunk. Stay sober."',
  '[00:00:02.100] Quote: "If you need to think â€” you\'re already late."',
  '[00:00:02.500] Quote: "Exchanges don\'t crash. They reveal your assumptions."',
  '[00:00:02.900] Quote: "Latency is truth."',
  '[00:00:03.300] Quote: "Speed hides everything, until it doesn\'t."',
  '[00:00:04.000] [Language detected...]',
  '[00:00:09.200] End of transmission.',
  '[00:00:04.000] [Audio signal detected...]',
  '[00:00:09.310] Happy compilation day (:'
];

let lineIndex = 0;
let hasTriggeredAudio = false;
let canScroll = true;

function appendLine(text) {
  const line = document.createElement('div');
  line.className = 'line';
  line.textContent = text;
  terminal.appendChild(line);
  setTimeout(() => line.classList.add('visible'), 50);
}

function removeLastLine() {
  const lines = terminal.querySelectorAll('.line.visible');
  if (lines.length > 0) {
    const last = lines[lines.length - 1];
    last.classList.remove('visible');
    last.classList.add('hidden-up');
    setTimeout(() => last.remove(), 400);
  }
}

function playSequence() {
  if (hasTriggeredAudio) return;
  hasTriggeredAudio = true;
  const a1 = document.getElementById('a1');
  const a2 = document.getElementById('a2');
  const a3 = document.getElementById('a3');
  a1.play();
  a1.onended = () => setTimeout(() => a2.play(), 1500);
  a2.onended = () => setTimeout(() => a3.play(), 2000);
}

function handleScrollEvent(e) {
  if (!canScroll) return;
  canScroll = false;
  setTimeout(() => canScroll = true, 400);

  if (e.deltaY > 0 && lineIndex < timeline.length) {
    appendLine(timeline[lineIndex]);
    if (timeline[lineIndex].includes('[Audio signal detected...]')) playSequence();
    lineIndex++;
  } 
  else if (e.deltaY < 0 && lineIndex > 0) {
    lineIndex--;
    removeLastLine();
  }
}

window.addEventListener('wheel', handleScrollEvent, { passive: true });
</script>
</body>
</html>