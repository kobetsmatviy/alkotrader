<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Alkotrader Terminal</title>
<style>
  body {
    background-color: #111;
    color: #00ff88;
    font-family: 'Inconsolata', monospace;
    font-size: 16px;
    padding: 20px;
    overflow: hidden;
  }
  .line {
    opacity: 0;
    transform: translateY(5px);
  }
  .time {
    color: #1a995e;
  }
  .visible {
    opacity: 1;
    transform: translateY(0);
    transition: opacity 0.4s ease-in, transform 0.4s ease-out;
  }
  .hidden-up {
    opacity: 0;
    transform: translateY(-5px);
    transition: opacity 0.4s ease-in, transform 0.4s ease-out;
  }
  #cursor {
    display: none;
    width: 8px;
    height: 16px;
    background-color: #00ff88;
    animation: blink 1s step-start infinite;
  }
  ::selection {
    background-color: #00ff88;
    color: #111;
  }
  ::-moz-selection {
    background-color: #00ff88;
    color: #111;
  }
  @keyframes blink {
    50% { opacity: 0; }
  }

  @media (max-width: 768px) {
    #terminal {
      display: flex;
      flex-direction: column;
      font-size: 14px;
      gap: 10px;
    }
    #cursor {
      margin-top: 10px;
    }
  }
</style>
</head>
<body>
<div id="terminal"></div>
<div id="cursor"></div>

<audio id="a1" src="a1.mp3"></audio>
<audio id="a2" src="a2.mp3"></audio>
<audio id="a3" src="a3.mp3"></audio>
<audio id="a4" src="a4.mp3"></audio>
<audio id="a5" src="a5.mp3"></audio>
<audio id="a6" src="a6.mp3"></audio>
<audio id="a7" src="a7.mp3"></audio>
<audio id="a8" src="a8.mp3"></audio>
<audio id="a9" src="a9.mp3"></audio>
<audio id="a10" src="lost_connection.mp3"></audio>
<audio id="a11" src="happy_day.mp3"></audio>

<script>
const terminal = document.getElementById('terminal');

/* ---------- CONTENT ---------- */

const timeline = [
  'Connecting to Alkotrader Terminal',
  'Ping: 39ys',
  'Scroll down to load more',
  'Loading alkotrader wisdom cache...',
  '¬´Markets are drunk. Stay sober¬ª',
  '[Language model loaded]',
  '¬´–°–µ–≥–æ–¥–Ω—è —Å–∞–º—ã–π —Ö–µ—Ä–æ–≤—ã–π –¥–µ–Ω—å –¥–ª—è —Ç—Ä–µ–π–¥–∏–Ω–≥–∞ #–∫—Ä–∏–ø—Ç–æ–∂–æ–ø–∞¬ª',
  '[Audio signal detected]',
  '¬´–Ø –Ω–∏–∫–æ–≥–¥–∞ –≤ –∂–∏–∑–Ω–∏ –Ω–∏ —Ä–∞–∑—É –Ω–∏ –Ω–∞ –æ–¥–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –æ–ø–µ—Ä–∞—Ç–æ—Ä switch. –°—á–∏—Ç–∞—é, —á—Ç–æ –æ–Ω –æ—Ç –ª—É–∫–∞–≤–æ–≥–æ¬ª',
  '¬´–ù—É –Ω–∏—á–µ–≥–æ, —Ä–µ—à–∞–µ–º–æ, –Ω–∞–¥–æ –ø—Ä–æ—Å—Ç–æ –ø–æ–¥–∞—Ä–∏—Ç—å –±–∏–Ω–∞–Ω—Å—É 25 BNB –∏ –ø–æ–ø—Ä–æ—Å–∏—Ç—å –º–µ–Ω–µ–¥–∂–µ—Ä–∞...¬ª',
  '¬´–†–µ—à–∏–ª –∑–∞–º–æ—Ä–æ—á–∏—Ç—å—Å—è –∏ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –æ–±—É—á–∏—Ç—å –Ω–µ–π—Ä–æ—Å–µ—Ç—å‚Ä¶ –ö–∞–∫ –≤—ã —É–∂–µ –¥–æ–≥–∞–¥–∞–ª–∏—Å—å, –Ω–∏—Ö–µ—Ä–∞—à–µ—á–∫–∏ –Ω–µ –ø–æ–ª—É—á–∏–ª–æ—Å—å¬ª',
  '¬´–¢–æ–ª—å–∫–æ —è –∫—É–ø–∏–ª —Å–µ—Ç—å HK <=> TOKYO 20 ms, –∫–∞–∫ —Å–Ω–æ–≤–∞ –Ω–∞—Ä–∏—Å–æ–≤–∞–ª–∏—Å—å –∫–∏—Ç–∞–π—Ü—ã...¬ª',
  '¬´–ë–∏—Ä–∂–∞ emirex —Å–¥–µ–ª–∞–Ω–∞ –Ω–∞ —Ç–∏–ª—å–¥–µ. –ö —Ç–∞–∫–æ–º—É –¥–∞–∂–µ –º–µ–Ω—è –∂–∏–∑–Ω—å –Ω–µ –≥–æ—Ç–æ–≤–∏–ª–∞¬ª',
  '¬´–ö—Ä–∏–ø—Ç–∞ –∏ —Ä—ç–ø –ø—Ä–æ–±–∏–≤–∞—é—Ç –¥–Ω–æ¬ª',
  '¬´–ü—Ä–µ–¥—Å–µ–¥–∞—Ç–µ–ª—è —Å–æ–≤–µ—Ç–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–æ–≤ Deutsche Bank –∑–æ–≤—É—Ç –º–∏—Å—Ç–µ—Ä Deutschescam. –î–æ–π—á–µ–°–ö–ê–ú¬ª',
  '¬´–ë–∏—Ä–∂–∞ kuna.io –æ–±–Ω–æ–≤–∏–ª–∞—Å—å –∏ –Ω–∞—Ö—Ä–µ–Ω –≤—ã–∫–ª—é—á–∏–ª–∞ –≤—Å–µ —Å–≤–æ–µ API. 2023–π –π–æ–ø—Ç–∞¬ª',
  '¬´–õ—É—á—à–µ –± –ø–∞–¥–∞–ª–∞ —É–∂–µ —ç—Ç–∞ –∫—Ä–∏–ø—Ç–∞, —á–µ–º —Å—Ç–æ—è–ª–∞ –Ω–∞ –º–µ—Å—Ç–µ¬ª',
  '[Lost connection to wisdom]',
  'Happy compilation day (:'
];

/* ---------- AUDIO MAP ---------- */

const audioMap = {
  8: 'a1',
  9: 'a2',
  10: 'a3',
  11: 'a4',
  12: 'a5',
  13: 'a6',
  14: 'a7',
  15: 'a8',
  16: 'a9',
  17: 'a10',
  18: 'a11'
};


const quoteLinks = {
  6:  'https://t.me/alko_trading/243',
  8:  'https://t.me/alko_trading/239',
  9:  'https://t.me/alko_trading/480',
  10: 'https://t.me/alko_trading/414',
  11: 'https://t.me/alko_trading/1362',
  12: 'https://t.me/alko_trading/351',
  13: 'https://t.me/alko_trading/1215',
  14: 'https://t.me/alko_trading/448',
  15: 'https://t.me/alko_trading/410',
  16: 'https://t.me/alko_trading/349'
};

/* ---------- STATE ---------- */

let lineIndex = 0;
let canScroll = true;
let isAutoplaying = false;
let waitingForStart = true;
let currentAudio = null;
let startLineElement = null;

/* ---------- DEVICE ---------- */

const isTouchDevice =
  'ontouchstart' in window ||
  navigator.maxTouchPoints > 0;

/* ---------- TIME ---------- */

function getLocalTimestamp() {
  const n = new Date();
  return `[${String(n.getHours()).padStart(2,'0')}:${String(n.getMinutes()).padStart(2,'0')}:${String(n.getSeconds()).padStart(2,'0')}.${String(n.getMilliseconds()).padStart(3,'0')}]`;
}

/* ---------- STICK TO BOTTOM ---------- */

function stickToBottom() {
  terminal.scrollTop = terminal.scrollHeight;
}

/* ---------- UI ---------- */

function appendLine(text) {
  const line = document.createElement('div');
  line.className = 'line';

  const time = document.createElement('span');
  time.className = 'time';
  time.textContent = getLocalTimestamp() + ' ';

  line.appendChild(time);

  const textNode = document.createElement('span');
  textNode.textContent = text;
  line.appendChild(textNode);

  // üîó –∫–Ω–æ–ø–∫–∞ –ø—Ä—è–º–æ—ó –∑–≥–∞–¥–∫–∏
  const link = quoteLinks[lineIndex];
  if (link) {
    const btn = document.createElement('a');
    btn.href = link;
    btn.target = '_blank';
    btn.rel = 'noopener noreferrer';
    btn.textContent = ' @alko_trading';

    btn.style.marginLeft = '8px';
    btn.style.color = '#00ff88';
    btn.style.textDecoration = 'none';
    btn.style.opacity = '0.6';
    btn.style.fontSize = '14px';

    btn.addEventListener('mouseenter', () => btn.style.opacity = '1');
    btn.addEventListener('mouseleave', () => btn.style.opacity = '0.6');

    line.appendChild(btn);
  }

  terminal.appendChild(line);

  setTimeout(() => {
    line.classList.add('visible');
    stickToBottom();
  }, 50);
}

function removeLastLine() {
  const lines = terminal.querySelectorAll('.line.visible');
  if (!lines.length) return;

  const last = lines[lines.length - 1];
  last.classList.remove('visible');
  last.classList.add('hidden-up');

  setTimeout(() => {
    last.remove();
    stickToBottom();
  }, 400);
}

/* ---------- AUDIO ENGINE ---------- */

function stopCurrentAudio() {
  if (!currentAudio) return;
  currentAudio.pause();
  currentAudio.currentTime = 0;
  currentAudio = null;
}

function playAudioForIndex(index) {
  stopCurrentAudio();

  const audioId = audioMap[index];
  if (!audioId) return;

  const audio = document.getElementById(audioId);
  if (!audio) return;

  currentAudio = audio;
  audio.currentTime = 0;
  audio.play();
}

/* ---------- CORE SCROLL LOGIC ---------- */

function processScroll(deltaY) {
  if (waitingForStart) return;
  if (isAutoplaying) return;
  if (!canScroll) return;

  canScroll = false;
  setTimeout(() => (canScroll = true), 300);

  if (deltaY > 0 && lineIndex < timeline.length) {
    appendLine(timeline[lineIndex]);
    playAudioForIndex(lineIndex);
    lineIndex++;
  }
  else if (deltaY < 0 && lineIndex > 0) {
    lineIndex--;
    removeLastLine();
    playAudioForIndex(lineIndex - 1);
  }
}

/* ---------- INPUTS ---------- */

// Desktop
window.addEventListener('wheel', e => {
  processScroll(e.deltaY);
}, { passive: true });

// Mobile
let touchStartY = null;

window.addEventListener('touchstart', e => {
  if (e.touches.length !== 1) return;
  touchStartY = e.touches[0].clientY;
}, { passive: true });

window.addEventListener('touchend', e => {
  if (touchStartY === null) return;
  const deltaY = touchStartY - e.changedTouches[0].clientY;
  if (Math.abs(deltaY) > 30) processScroll(deltaY);
  touchStartY = null;
}, { passive: true });

/* ---------- AUTOPLAY ---------- */

function autoplayInitialLines(count = 3, delay = 700) {
  isAutoplaying = true;
  let shown = 0;

  function step() {
    if (shown >= count) {
      isAutoplaying = false;
      return;
    }

    appendLine(timeline[lineIndex]);
    playAudioForIndex(lineIndex);
    lineIndex++;
    shown++;

    setTimeout(step, delay);
  }

  step();
}

/* ---------- START PROMPT ---------- */

function showStartPrompt() {
  const line = document.createElement('div');
  line.className = 'line visible';
  line.textContent = isTouchDevice ? 'Tap to continue' : 'Press SPACE';
  terminal.appendChild(line);
  startLineElement = line;
  stickToBottom();
}

function startSession() {
  if (!waitingForStart) return;
  waitingForStart = false;

  if (startLineElement) {
    startLineElement.classList.add('hidden-up');
    setTimeout(() => {
      startLineElement.remove();
      stickToBottom();
    }, 400);
  }

  autoplayInitialLines(3, 700);
}

/* ---------- START EVENTS ---------- */

if (isTouchDevice) {
  window.addEventListener('touchend', () => {
    if (waitingForStart) startSession();
  }, { once: true });
} else {
  window.addEventListener('keydown', e => {
    if (waitingForStart && e.code === 'Space') {
      e.preventDefault();
      startSession();
    }
  });
}

/* ---------- INIT ---------- */

window.addEventListener('load', () => {
  showStartPrompt();
});
</script>


</body>
</html>